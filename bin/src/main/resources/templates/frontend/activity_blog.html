<!DOCTYPE html>
<html lang="en">
  <head>
  
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Activity For Blogs</title>

    <!-- Favicon -->
    <link href="/img/favicon.ico" rel="icon" />

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
      rel="stylesheet"
    />


    <!-- Customized Bootstrap Stylesheet -->
    <link th:href="@{/css/style.css}" rel="stylesheet" />
    <link th:href="@{/css/yuki_style.css}" rel="stylesheet" />
    

    <style>
     .row {
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        width: 80%;
        margin: 0 auto;
        overflow: hidden;
        border-bottom: 3px dotted #eee;
        padding-top: 30px;
        padding-bottom: 30px;
      }

      .banner-carousel-box {
        display: flex;
        box-sizing: border-box;
        justify-content: center;
        align-items: center;
        height: 300px;
        transition: transform 0.5s ease-in-out;
      }

      .banner-carousel {
        min-width: 100%;
        box-sizing: border-box;
      }

      .banner-carousel img {
        width: 100%;
        display: block;
      }

      .row .prev,
      .row .next {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background-color: rgba(0, 0, 0, 0.5);
        color: white;
        border: none;
        cursor: pointer;
        padding: 10px;
        font-size: 18px;
        z-index: 10;
      }

      .row .prev {
        left: 10px;
      }

      .row .next {
        right: 10px;
      }

      .banner-carousel-box .banner-carousel img {
        width: 100%;
        display: block;
        object-fit: cover;
        object-position: center;
      }
    </style>
  </head>

  <body>

   <!------網站header------>
   <div id="app">
    <header>
      <nav class="top-nav">
        <div class="nav-left">
          <a href="#" class="nav-item nav-link" id="nav-go">Go！行程</a>
          <a href="#" class="nav-item nav-link" id="nav-product">購！票券</a>
          <a href="#" class="nav-item nav-link" id="nav-profile">個人主頁</a>
          <a href="#" class="nav-item nav-link" id="nav-guide">使用指南</a>
        </div>
        <div class="nav-center">
          <a href="#" id="z-index">
            <img th:src="@{/img/logo_black.png}" alt="Chill Trip" style="width: 150px; height: auto" />
          </a>
        </div>
        <div class="nav-right">
          <div class="nav-item dropdown">
            <a
              href="#"
              class="nav-link dropdown-toggle"
              data-toggle="dropdown"
              style="color: #212529"
              >會員中心</a
            >
            <div class="dropdown-menu rounded-0 m-0">
              <a href="#" class="dropdown-item" id="nav-basic-info"
                >基本資料</a

              >
              <a href="#" class="dropdown-item" id="nav-coupons"
                >我的折價券</a
              >
              <a href="#" class="dropdown-item" id="nav-orders">歷史訂單</a>
            </div>
          </div>
          <a href="#" class="nav-item nav-link" id="nav-support">客服中心</a>
          <a href="#" class="nav-item nav-link" id="nav-cart">購物車</a>
        </div>
      </nav>
    </header>
  </div>

    <!------主頁的幻燈片活動區------>
    <div class="row">
      <div class="banner-carousel-box">
        
      </div>
      <button class="prev">❮</button>
      <button class="next">❯</button>
    </div>

    <!-----行程活動專區------>
    <!-- 鼓勵大家多多發文、活絡論壇氣氛 -->
    <div class="container-fluid py-5">
      <div class="container pt-5 pb-3">
        <div class="text-center mb-5">
          <h5
            class="text-primary text-uppercase mb-3"
            style="letter-spacing: 5px"
            id ="admin.nickname"
          >
            管理員名稱
          </h5>
          <h5
            class="text-primary text-uppercase mb-3"
            style="letter-spacing: 5px"
            id ="time"
          >
            開始時間-結束時間
          </h5>
          <h1 id ="title">Chill・活動名稱</h1>
        </div>
        <div class="row">
          <div class="col-lg-6">
            <img
              id="photo"
            />
          </div>
          <div class="col-lg-6">
            <h2 class="text-primary" id ="content"></h2>
            
            
          </div>

        
      </div>
    </div>

    <!------網站footer------>
    <footer>
      <div class="d-flex justify-content-start mt-4">
        <a class="btn btn-outline-light btn-square mr-2" href="#"
          ><i class="fab fa-twitter"></i
        ></a>
        <a class="btn btn-outline-light btn-square mr-2" href="#"
          ><i class="fab fa-facebook-f"></i
        ></a>
        <a class="btn btn-outline-light btn-square mr-2" href="#"
          ><i class="fab fa-linkedin-in"></i
        ></a>
        <a class="btn btn-outline-light btn-square" href="#"
          ><i class="fab fa-instagram"></i
        ></a>
      </div>
      <div class="social-links">
        <div style="display: flex; gap: 10px">
          <a
            href="https://facebook.com"
            target="_blank"
            style="text-decoration: none"
          >
            <div
              style="
                width: 50px;
                height: 50px;
                background-color: #3b5998;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
              "
            >
              <i
                class="fab fa-facebook-f"
                style="color: white; font-size: 24px"
              ></i>
            </div>
          </a>
          <a
            href="https://instagram.com"
            target="_blank"
            style="text-decoration: none"
          >
            <div
              style="
                width: 50px;
                height: 50px;
                background-color: #e1306c;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
              "
            >
              <i
                class="fab fa-instagram"
                style="color: white; font-size: 24px"
              ></i>
            </div>
          </a>
          <a
            href="https://youtube.com"
            target="_blank"
            style="text-decoration: none"
          >
            <div
              style="
                width: 50px;
                height: 50px;
                background-color: #ff0000;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
              "
            >
              <i
                class="fab fa-youtube"
                style="color: white; font-size: 24px"
              ></i>
            </div>
          </a>
        </div>

   <!------ 共用JS ------>
    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"
      ><i class="fa fa-angle-double-up"></i
    ></a>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>


    <!-- 本地資源改用 Thymeleaf 語法 -->
    <script th:src="@{/lib/easing/easing.min.js}"></script>
    <script th:src="@{/lib/owlcarousel/owl.carousel.min.js}"></script>

    <!-- Contact Javascript File -->
    <script th:src="@{/mail/jqBootstrapValidation.min.js}"></script>
    <script th:src="@{/mail/contact.js}"></script>

    <!-- Template Javascript -->
    <script th:src="@{/js/main.js}"></script>

    <!-- 導航欄nav的href載入器 -->
    <script th:src="@{/js/navigation.js}"></script>


    <script>  //動態生成公告圖片
      document.addEventListener('DOMContentLoaded', function () {
      
      const carouselContainer = document.querySelector('.banner-carousel-box');
   // 獲取當前頁面的 URL 路徑
      const currentPath = window.location.pathname;

      // 將路徑中的最後一部分替換為 'getAll'
      const newUrl = currentPath.replace(/\/[^\/]+$/, '/getAll');
  
      
      // 使用 fetch 获取公告列表
      fetch(newUrl)
          .then(response => response.json())  // 假设返回的是 JSON
          .then(announcements => {
              carouselContainer.innerHTML = '';
  
              announcements.forEach(announce => {
                  const bannerItem = document.createElement('div');
                  bannerItem.classList.add('banner-carousel');
  
                  const link = document.createElement('a');
                  link.href = `${window.location.origin}${window.location.pathname.split('/')[1] ? '/' + window.location.pathname.split('/')[1] : ''}/${announce.announceid}`; // 你可以根据需要设置不同的链接
  
                  const img = document.createElement('img');
                  // 设置图片的 src 属性为 coverphotoBase64
                  if (announce.coverphotoBase64) {
                      img.src = announce.coverphotoBase64;  // 将 base64 编码的图片数据设置为 src
                  }
                  img.alt = announce.title;       // 设置图片的 alt 属性为公告的标题
  
                  link.appendChild(img);
                  bannerItem.appendChild(link);
  
                  carouselContainer.appendChild(bannerItem);
              });
          })
          .catch(error => {
              console.error('Error fetching announcements:', error);
          });
  });</script>

<!-- 頁面內容 -->
<script>
document.addEventListener("DOMContentLoaded", function () {
	
	 // 获取 URL 中的路径部分
	  const pathname = window.location.pathname;
	  
	  // 使用正则表达式提取 id
	  const matches = pathname.match(/\/announce\/(\d+)/); // 假设 URL 格式是 /announce/{id}
	  
	  if (matches && matches[1]) {
	    const id = matches[1];  // 获取 id
	    
	    // 使用正则表达式将最后的数字部分替换为 '/getById/{id}'
	    const newUrlPath = pathname.replace(/\/(\d+)$/, `/getById/${id}`);
	    
	    // 拼接新的完整 URL
	    const apiUrl = window.location.origin + newUrlPath;
	    
	    // 使用 fetch 请求数据
	    fetch(apiUrl)
      .then(response => response.json())
      .then(data => {
        // 填充页面内容
        document.getElementById('admin.nickname').innerText = data.adminvo.adminnickname;
        document.getElementById('time').innerText = `${data.starttime} - ${data.endtime}`;
        document.getElementById('title').innerText = data.title;
        document.getElementById('content').innerText = data.content;

        // 填充封面图片，假设封面图片是以 base64 编码的字符串
        const coverphotoSrc = `data:image/jpeg;base64,${data.coverphoto}`;
        document.getElementById('photo').src = coverphotoSrc;
      })
      .catch(error => {
        console.error('Error fetching data:', error);
      });
  }
});
</script>


    <!------修齊的JS------>
    <!------主頁的幻燈片活動區------>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const carouselInner = document.querySelector(".banner-carousel-box");
        const items = document.querySelectorAll(".banner-carousel");
        const totalItems = items.length;
        let currentIndex = 0;

        document.querySelector(".next").addEventListener("click", function () {
          currentIndex = (currentIndex + 1) % totalItems;
          updateCarousel();
        });

        document.querySelector(".prev").addEventListener("click", function () {
          currentIndex = (currentIndex - 1 + totalItems) % totalItems;
          updateCarousel();
        });

        function updateCarousel() {
          const offset = -currentIndex * 100;
          carouselInner.style.transform = `translateX(${offset}%)`;
        }

        // 自動輪播
        setInterval(function () {
          currentIndex = (currentIndex + 1) % totalItems;
          updateCarousel();
        }, 3000);
      });
    </script>
    
  </body>
</html>