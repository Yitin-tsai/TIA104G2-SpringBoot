<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ChillTrip's Admin Registration</title>

<!-- Favicon -->
<link href="img/favicon.ico" rel="icon">

<!-- Google Web Fonts -->
<link rel="preconnect" href="https://fonts.gstatic.com">
<link
	href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
	rel="stylesheet">

<!-- Font Awesome -->
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
	rel="stylesheet">

<!-- Libraries Stylesheet -->
<link href="lib/owlcarousel/assets/owl.carousel.min.css"
	rel="stylesheet">

<!-- Customized Bootstrap Stylesheet -->
<link href="css/style.css" rel="stylesheet">
<link href="css/yuki_style.css" rel="stylesheet">
<style>
.breadcrumb {
	background-color: transparent;
	/* 移除背景色 */
	list-style: none;
	/* 移除列表樣式 */
	display: flex;
	padding: 0;
	margin: 1rem 0;
}

.breadcrumb-item {
	font-size: calc(1rem - 4px);
	/* 比 dropdown-item 小 4px */
	color: #6c757d !important;
	/* 預設顯示為灰色，並覆蓋 Bootstrap 預設樣式 */
	text-decoration: none;
	display: inline-block;
	padding: 0.25rem 0.75rem;
}

.breadcrumb-item+.breadcrumb-item::before {
	content: ">";
	padding: 0 0.5rem;
	color: #6c757d;
}

.breadcrumb-item a {
	color: #6c757d !important;
	/* 更改 a 標籤的預設顏色為灰色 */
	text-decoration: none;
	/* 移除下劃線 */
}

.breadcrumb-item a:hover {
	color: #FF6600 !important;
	/* 滑鼠移動到 a 標籤上時顯示為橘色 */
}

.breadcrumb-item.active {
	color: #FF6600 !important;
	/* 最後一個元素顯示為橘色，並覆蓋 Bootstrap 預設樣式 */
}

main {
	margin-top: 80px;
}

* {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
	font-family: Arial, sans-serif;
}

body {
	background-color: #f5f5f5;
}

.header {
	padding: 10px 0;
}

.header-content {
	max-width: 1200px;
	margin: 0 auto;
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 0 20px;
}

.logo {
	font-size: 24px;
	color: #333;
	text-decoration: none;
}

.nav-links a {
	margin-left: 20px;
	text-decoration: none;
	color: #666;
}

.container {
	max-width: 600px;
	margin: 40px auto;
	padding: 20px;
	background: white;
	border-radius: 8px;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	position: relative;
	top: -50px;
}

h2 {
	text-align: center;
	color: #333;
	margin-bottom: 30px;
}

.form-group {
	margin-bottom: 20px;
	position: relative;
}

.form-group label {
	display: block;
	margin-bottom: 5px;
	color: #666;
}

.required::after {
	content: '*';
	color: #ff4444;
	margin-left: 4px;
}

input {
	width: 100%;
	padding: 10px;
	border: 1px solid #ddd;
	border-radius: 4px;
	font-size: 14px;
}

.password-toggle {
	position: absolute;
	right: 10px;
	top: 35px;
	cursor: pointer;
	background: none;
	border: none;
	padding: 0;
	width: 24px;
	height: 24px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.password-toggle svg {
	width: 20px;
	height: 20px;
	fill: #333;
}

.password-toggle .eye-open, .password-toggle.visible .eye-closed {
	display: none;
}

.password-toggle .eye-closed, .password-toggle.visible .eye-open {
	display: block;
}

.verify-button {
	position: absolute;
	right: 5px;
	top: 32px;
	padding: 5px 10px;
	background: #666;
	color: white;
	border: none;
	border-radius: 4px;
	cursor: pointer;
}

.submit-button {
	width: 100%;
	padding: 12px;
	background: #FF6600;
	color: white;
	border: none;
	border-radius: 4px;
	cursor: pointer;
	font-size: 16px;
	margin-top: 20px;
}

.submit-button:hover {
	background: #FF6600;
}

.login-link {
	display: block;
	margin-top: 20px;
	/* 與上方註冊按鈕的間距 */
	text-align: center;
	/* 文字置中 */
	color: #333;
	text-decoration: none;
	/* 去除底線 */
}

.social-links {
	margin-bottom: 10px;
}

.social-links a {
	margin: 0 10px;
	color: #333;
	text-decoration: none;
}

select {
	width: 100%;
	padding: 10px;
	border: 1px solid #ddd;
	border-radius: 4px;
	font-size: 14px;
}

/* Modal Styles */
.modal {
	display: none;
	justify-content: center;
	align-items: center;
	padding: 1rem;
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	z-index: 9999;
}

.modal-content {
	background-color: white;
	padding: 1.5rem;
	border-radius: 8px;
	text-align: center;
	width: 90%;
	max-width: 400px;
	box-sizing: border-box;
}

/* Success Modal */
.success .modal-content {
	border: 2px solid #4CAF50;
	background-color: #d4edda;
	color: #155724;
}

/* Confirm Button Style */
.modal-btn {
	padding: 8px 16px;
	border-radius: 4px;
	cursor: pointer;
	font-size: 14px;
	border: none;
	background-color: #FF6600;
	color: white;
	transition: 0.3s;
}

/* Hover Effect for the Button */
.modal-btn:hover {
	background-color: #e65c00;
}

.modal-buttons {
	margin-top: 1.5rem;
	display: flex;
	justify-content: center;
	gap: 1rem;
}

.show {
	display: flex;
}
/* 使单选按钮水平排列 */
.radio-buttons {
  display: flex;
  gap: 10px; /* 控制单选按钮之间的间距 */
  align-items: center; /* 垂直对齐 */
}

/* 调整单个单选按钮 */
.radio-buttons input[type="radio"] {
  width: 20px;
  height: 20px;
  appearance: none; /* 去掉默认外观 */
  border: 2px solid #007bff; /* 蓝色边框 */
  border-radius: 50%; /* 圆形 */
  outline: none;
  cursor: pointer;
  position: relative;
}

.radio-buttons input[type="radio"]:checked {
  background-color: #007bff; /* 被选中的背景颜色 */
  border-color: #0056b3; /* 选中时的边框颜色 */
}

.radio-buttons input[type="radio"]:checked::after {
  content: '\2022'; /* 使用圆点符号表示选中 */
  color: white; /* 圆点颜色 */
  font-size: 18px;
  position: absolute;
  top: 2px;
  left: 2px;
}

/* 使 radio button 标签和文本对齐 */
.radio-buttons label {
  font-size: 16px;
  cursor: pointer;
}

.readonly-input input[readonly] {
    background-color: #d3d3d3; /* 設置灰色背景 */
  }
</style>
</head>

<body>
	<!------網站header------>
	<div id="app">
		<header>
			<nav class="top-nav">
				<div class="nav-left">
					<a href="#" class="nav-item nav-link" id="nav-go">Go！行程</a> <a
						href="./product.html" class="nav-item nav-link" id="nav-product">購！票券</a>
					<a href="#" class="nav-item nav-link" id="nav-profile">個人主頁</a> <a
						href="#" class="nav-item nav-link" id="nav-guide">使用指南</a>
				</div>
				<div class="nav-center">
					<a href="#"> <img id="ChillTrip_logo"
						src="./img/logo_black.png" alt="Chill Trip"
						style="width: 150px; height: auto; cursor: pointer" />
					</a>
				</div>
				<div class="nav-right">
					<div class="nav-item dropdown">
						<a href="#" class="nav-link dropdown-toggle"
							data-toggle="dropdown" style="color: #212529">會員中心</a>
						<div class="dropdown-menu rounded-0 m-0">
							<a href="#" class="dropdown-item" id="nav-basic-info">基本資料</a>
							<a href="#" class="dropdown-item" id="nav-coupons">我的折價券</a>
							<a href="#" class="dropdown-item" id="nav-orders">歷史訂單</a>
						</div>
					</div>
					<a href="#" class="nav-item nav-link" id="nav-support">客服中心</a> <a
						href="#" class="nav-item nav-link" id="nav-cart">購物車</a>
				</div>
			</nav>
		</header>
	</div>

	<!------網站Breadcrumb Navigation（麵包屑導航）------>
	<div aria-label="breadcrumb">
		<ul class="breadcrumb" id="breadcrumb-nav">
			<!-- 麵包屑導航項目將由 JavaScript 動態生成 -->
		</ul>
	</div>

	<main>
		<div class="container">
			<form id="registrationForm">
				<div class="form-group">
					<p>更新管理員資料</p>
					<p style="color: #ff4444">*為必填項目</p>
				</div>
	
				<!-- Admin ID -->
				<div class="form-group readonly-input">
					<label class="required">管理員 ID</label>
					<input type="text" id="adminid" readonly />
				</div>
				
				<!-- Admin Status (Read-Only) -->
			  <div class="form-group readonly-input">
				  <label class="required">狀態</label>
				  <input type="text" id="status" readonly />
			  </div>
	
				<!-- Admin Account -->
				<div class="form-group">
					<label class="required">帳號</label>
					<input type="text" id="accound_number" required />
					<div id="adminaccountError" style="color: #ff4444; font-size: 14px; display: none;"></div>
				</div>
	
				<!-- Admin Name -->
				<div class="form-group readonly-input">
					<label class="required">姓名</label>
					<input type="text" id="adminname" readonly />
					<div id="adminnameError" style="color: #ff4444; font-size: 14px; display: none;"></div>
				</div>
	
				<!-- Admin Nickname -->
				<div class="form-group ">
					<label class="required">暱稱</label>
					<input type="text" id="adminnickname" required />
					<div id="adminnicknameError" style="color: #ff4444; font-size: 14px; display: none;"></div>
				</div>
	
				<!-- Admin Phone -->
				<div class="form-group">
					<label class="required">聯絡電話</label>
					<input type="tel" id="phone" required />
					<div id="phoneError" style="color: #ff4444; font-size: 14px; display: none;"></div>
				</div>

				<div class="form-group readonly-input">
					<label class="required">電子信箱</label> <input type="email" id="email"
					readonly />
					<div id="emailError"
						style="color: #ff4444; font-size: 14px; display: none;"></div>
				</div>
	
				<!-- Admin Password -->
				<div class="form-group">
					<label class="required">密碼</label>
					<input type="password" id="adminpassword" required />
					<div id="adminpasswordError"
						style="color: #ff4444; font-size: 14px; display: none;"></div>
					<button type="button" class="password-toggle" data-target="password">
						<svg class="eye-open" viewBox="0 0 24 24">
							<path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" />
						</svg>
					</button>
				</div>
				
				
	
				<!-- Submit Button -->
				<button type="submit" class="submit-button">更新</button>
			</form>
		</div>
	</main>
	

		<!-- 成功提示框 -->
		<div class="modal" id="successModal" style="display: none;">
			<div class="modal-content">
			<p>更新成功！</p>
			<div class="modal-buttons">
				<button class="modal-btn confirm-btn" id="confirmBtn">確認</button>
			</div>
			</div>
		</div>

	<footer>
		<div class="social-links">
			<div style="display: flex; gap: 10px">
				<a href="https://facebook.com" target="_blank"
					style="text-decoration: none">
					<div
						style="width: 50px; height: 50px; background-color: #3b5998; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
						<i class="fab fa-facebook-f" style="color: white; font-size: 24px"></i>
					</div>
				</a> <a href="https://instagram.com" target="_blank"
					style="text-decoration: none">
					<div
						style="width: 50px; height: 50px; background-color: #e1306c; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
						<i class="fab fa-instagram" style="color: white; font-size: 24px"></i>
					</div>
				</a> <a href="https://youtube.com" target="_blank"
					style="text-decoration: none">
					<div
						style="width: 50px; height: 50px; background-color: #ff0000; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
						<i class="fab fa-youtube" style="color: white; font-size: 24px"></i>
					</div>
				</a>
			</div>

			<!-- 加載 Font Awesome 圖標庫 -->
			<link
				href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
				rel="stylesheet" />
		</div>
		<div class="copyright">Copyright © 2024 良心鮪魚股份有限公司</div>
	</footer>

	<!-- Back to Top -->
	<a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i
		class="fa fa-angle-double-up"></i></a>

	<!-- JavaScript Libraries -->
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<!-- <script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script> -->
	<!-- <script src="lib/easing/easing.min.js"></script> -->
	<!-- <script src="lib/owlcarousel/owl.carousel.min.js"></script> -->

	<!-- Contact Javascript File -->
	<!-- <script src="mail/jqBootstrapValidation.min.js"></script> -->
	<!-- <script src="mail/contact.js"></script> -->

	<!-- Template Javascript -->
	<!-- <script src="js/main.js"></script> -->

	
	  
	  

	<!-- 導航欄nav的href載入器 -->
	<script>
		const contextPath = "/TIA104G2-SpringBoot";
		document.addEventListener("DOMContentLoaded", function () {
	// 當頁面加載完成後，進行資料填充
	fetch("/TIA104G2-SpringBoot/admin/getOneSession")
		.then(response => response.json())
		.then(data => {
			if (data) {
				// 填充表單的資料
				document.getElementById("adminid").value = data.adminid;
				document.getElementById("accound_number").value = data.adminaccount;
				document.getElementById("adminname").value = data.adminname;
				document.getElementById("adminnickname").value = data.adminnickname;
				document.getElementById("phone").value = data.phone;
				document.getElementById("email").value = data.email;
				document.getElementById("status").value = data.status;
			}
		})
		.catch(error => console.error('Error fetching session data:', error));

	// 2. 更新資料
	const form = document.getElementById('registrationForm');

	form.addEventListener("submit", function (event) {
		event.preventDefault(); // 阻止表單的默認提交行為

		const data = {
			adminid: document.getElementById("adminid").value,
			adminaccount: document.getElementById('accound_number').value,    // 获取 'account_number' 的值
			adminname: document.getElementById('adminname').value,            // 获取 'adminname' 的值
			adminnickname: document.getElementById('adminnickname').value,    // 获取 'adminnickname' 的值
			phone: document.getElementById('phone').value,                    // 获取 'phone' 的值
			email: document.getElementById('email').value,                    // 获取 'email' 的值
			status: document.getElementById('status').value, 
			  adminpassword: document.getElementById('adminpassword').value,         // 获取 'password' 的值
			 
		};
		
		// 3. 發送資料到後端進行更新
		fetch("/TIA104G2-SpringBoot/admin/update", {
			method: "POST",
			headers: {
				"Content-Type": "application/json"
			},
			body: JSON.stringify(data)
		})
			.then(response => response.json())
			.then(result => {
				console.log(result);
				if (result.message ==="更新成功") {
					/// 登入成功，顯示成功彈窗
                $('#successModal').show();

                $('#confirmBtn').click(function () {
                    // 在確認後跳轉到首頁
                    window.location.href =contextPath +  '/adminProfile';
                });
				} else  {
					// 若有錯誤，顯示錯誤訊息
					handleErrorMessages(result);
				}
			})
			.catch(error => console.error('Error updating admin data:', error));
	});

	// 4. 顯示錯誤訊息
		function handleErrorMessages(errorMsgs) {
		// 清空之前的错误消息
		const errorFields = ['adminaccount', 'adminpassword', 'adminname', 'phone', 'email', 'adminnickname'];
		errorFields.forEach(field => {
			const errorDiv = document.getElementById(`${field}Error`);
			if (errorDiv) {
				errorDiv.style.display = 'none'; // 隱藏舊的錯誤訊息
			}
		});

		// 顯示新的錯誤訊息
		for (const [field, errorMsg] of Object.entries(errorMsgs)) {
			const errorDiv = document.getElementById(`${field}Error`);
			if (errorDiv) {
				errorDiv.textContent = errorMsg;
				errorDiv.style.display = 'block'; // 顯示錯誤訊息
			}
		}
	}
	  
		  
		  
		});
	

</script>

	<script>
      document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("nav-go").href = "./go.html";
        document.getElementById("nav-product").href = "./product.html";
        document.getElementById("nav-profile").href = "./profile.html";
        document.getElementById("nav-guide").href = "./guide.html";
        document.getElementById("nav-basic-info").href = "./basic_info.html";
        document.getElementById("nav-coupons").href = "./coupons.html";
        document.getElementById("nav-orders").href = "./orders.html";
        document.getElementById("nav-support").href = "./support.html";
        document.getElementById("nav-cart").href = "./cart.html";

      });
    </script>

	
	<script>
      document.addEventListener("DOMContentLoaded", function () {
        const breadcrumbNav = document.getElementById("breadcrumb-nav");

        // 定義麵包屑導航的項目
        const breadcrumbItems = [
          { name: "首頁", link: "index.html" },
          { name: "管理員註冊", link: "Admin_registration.html" },
        ];

        // 動態生成麵包屑導航的 HTML 結構
        breadcrumbItems.forEach((item, index) => {
          const li = document.createElement("li");
          li.className = "breadcrumb-item";
          if (index === breadcrumbItems.length - 1) {
            li.classList.add("active");
            li.setAttribute("aria-current", "page");
            li.textContent = item.name;
          } else {
            const a = document.createElement("a");
            a.href = item.link;
            a.textContent = item.name;
            li.appendChild(a);
          }
          breadcrumbNav.appendChild(li);
        });
      });
	  

      // 密碼顯示開關功能
      document.querySelectorAll(".password-toggle").forEach((button) => {
        button.addEventListener("click", function () {
          const target = document.getElementById(
            this.getAttribute("data-target")
          );
          const isVisible = target.type === "text"; // 檢查是否顯示密碼
          target.type = isVisible ? "password" : "text"; // 切換密碼顯示/隱藏
          this.classList.toggle("visible", !isVisible); // 切換 eye-icon
        });
      });

    </script>
</body>
</html>
